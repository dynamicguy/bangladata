{% extends "base.html" %}
{% block head %}
<link rel="stylesheet" type= "text/css" href= "{{ url_for('static',filename='css/parlelections.css') }}">
{{super()}}
{% endblock %}

{% block content %}
<!--info modals-->
<div class="modal fade" role="dialog" id="modal_about">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">About The Map</h4>
            </div>
            <div class="modal-body">
                <p>These maps display parliamentary election results data from the 2001 and 2008 elections.
                  <br><br>
                  The Eighth National Parliamentary Elections were held on 1 October 2001.
                  The Bangladesh Nationalist Party-backed Four Party Alliance won 193 of 300 seats. Voter turnout was 75%
                  <br><br>
                  The Ninth National Parliamentary Elections were held on 29 December 2008.
                  The Awami League-backed Mohajote coalition won 262 of 300 seats. Voter turnout was 80%
                  <br><br>
                  The "Magnitude" maps highlight the magnitude of the victory by a coalition or party in each constituency in the 2001 and 2008 elections, respectively.
                  The larger the circle, the larger the margin of victory of the winning coalition or party over its nearest competitor.
                  <br><br>
                  The "Constituency" map displays the victories by coalition or party by constituency in the 2008 elections.
                  The darker the color, the larger the margin of victory of the winning coalition or party over its nearest competitor.
                  <br><br>
                  The "Swing" map displays the election constituencies that were decided by margins of victory of less than 10% in the 2008 elections.
                  The color of the constituency corresponds to the winning coalition or party.
                </p>
              </div>
              <div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Close</button></div>
          </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->
<!-- a Bootstrap modal, which we'll bind to the control via the modalId parameter -->
<<div class="modal fade" role="dialog" id="modal_help">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">About the Data</h4>
            </div>
            <div class="modal-body">
                <p>The data was compiled from the <a href="http://www.ec.org.bd/MenuExternalFilesEng/124.pdf" target="_blank">Eight Parliament Election Statistical Report (2001)</a>
                  and the <a href="http://www.ec.org.bd/MenuExternalFilesEng/304.pdf" target="_blank">Ninth Parliament Election Statistical Report (2008)</a>
                  published on the website of the <a href="http://www.ec.org.bd/" target="_blank">Election Commission of Bangladesh</a></p>
                </div>
            <div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Close</button></div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
{{super()}}
{% endblock %}

{% block scripts %}
<!--<script src="{{ url_for('static', filename='data/elections/results2001.json')}}"></script>
<script src="{{ url_for('static', filename='data/elections/results2008.json')}}"></script>-->
<script src="{{ url_for('static', filename='data/elections/results2008c.json')}}"></script>
<!--<script src="{{ url_for('static', filename='data/elections/swing.json')}}"></script>-->
<script src="{{ url_for('static', filename='data/elections/turnout2008.json')}}"></script>
<script src="{{ url_for('static', filename='data/elections/awami2008.json')}}"></script>
<script src="{{ url_for('static', filename='data/elections/bnp2008.json')}}"></script>
<script src="{{ url_for('static', filename='data/elections/jatiya2008.json')}}"></script>
<script src="{{ url_for('static', filename='data/elections/other2008.json')}}"></script>
<script src="{{ url_for('static', filename='data/elections/cancelled2008.json')}}"></script>
<!--<script src="{{ url_for('static', filename='data/elections/battleground.json')}}"></script>
<script src="{{ url_for('static', filename='js/elections/results2001.js')}}"></script>
<script src="{{ url_for('static', filename='js/elections/results2008.js')}}"></script>-->
<script src="{{ url_for('static', filename='js/elections/results2008con.js')}}"></script>
<!--<script src="{{ url_for('static', filename='js/elections/swing.js')}}"></script>-->
<script src="{{ url_for('static', filename='js/elections/turnout2008.js')}}"></script>
<script src="{{ url_for('static', filename='js/elections/awami2008.js')}}"></script>
<script src="{{ url_for('static', filename='js/elections/bnp2008.js')}}"></script>
<script src="{{ url_for('static', filename='js/elections/jatiya2008.js')}}"></script>
<script src="{{ url_for('static', filename='js/elections/other2008.js')}}"></script>
<script src="{{ url_for('static', filename='js/elections/cancelled2008.js')}}"></script>
<!--<script src="{{ url_for('static', filename='js/elections/battleground.js')}}"></script>-->
<script>
$(document).ready(function() {
L.control.layers(baseLayers, null, {collapsed: true, position: 'topleft'}).addTo(map);
map.flyTo([24, 90], 7);
});

var totalVotes = "Total Votes";
var totalSeats = "Total Seats";
var pctVote = "Vote Percentage";
var recVotes = "Votes Received";
var wonSeats = "Seats Won";
var diff = "Difference (+/-)";
var otherVotes = "Other Votes";
var otherSeats = "Other Seats";
var otherPct = "Other Percentage";
var voterReg = "Registered Voters";
var voterTot = "Total Voters";
var turnout = "Turnout Percentage";
var voterRegF = "Registered Female Voters";
var voterTotF = "Female Voter Turnout";
var voterPctF = "Female Turnout Percentage";
var voterRegM = "Registered Male Voters";
var voterTotM = "Male Voter Turnout";
var voterPctM = "Male Turnout Percentage";
var difference = "Difference (+/-)";
var castBallot = "Ballots Cast";
var votesInv = "Invalid Votes";
var pctInv = "Invalid Percentage";
var winner = "Winner";
var runnerUp = "Runner Up";
var cancelled = "Cancelled Ballots";
var cancelledPercentage = "Cancelled Percentage";
var winner1991 = "1991 Winner";
var runnerUp1991 = "1991 Runner Up";
var winner1996 = "1996 Winner";
var runnerUp1996 = "1996 Runner Up";
var winner2001 = "2001 Winner";
var runnerUp2001 = "2001 Runner Up";
var winner2008 = "2008 Winner";
var runnerUp2008 = "2008 Runner Up";

var results2001geojson;
var results2008geojson;
var results2008congeojson;
var swinggeojson;
var turnout2008geojson;
var awami2008geojson;
var jatiya2008geojson;
var other2008geojson;
var cancelled2008geojson;
var battlegroundgeojson;

var overlayMaps = {
  //"Battleground Constituencies": battlegroundgeojson,
  //"2001 Elections - Magnitude": results2001geojson,
  //"2008 Elections - Magnitude": results2008geojson,
  "2008 Elections - Constituency": results2008congeojson,
  //"2008 Elections - Swing": swinggeojson,
  "2008 Elections - Turnout": turnout2008geojson,
  "2008 Elections - AL": awami2008geojson,
  "2008 Elections - BNP": bnp2008geojson,
  "2008 Elections - JP": jatiya2008geojson,
  "2008 Elections - Other": other2008geojson,
  "2008 Elections - Cancelled": cancelled2008geojson
};

map.addLayer(results2008congeojson);
L.control.layers(overlayMaps, null, {collapsed: false, position: 'bottomleft'}).addTo(map);
results2008conlegend.addTo(map);
results2008coninfo.addTo(map);
var currentLegend = results2008conlegend;
var currentInfo = results2008coninfo;

map.on('baselayerchange', function(eventLayer) {
  /*if(eventLayer.name === '2001 Elections - Magnitude') {
    map.removeControl(currentLegend);
    currentLegend = results2001legend;
    results2001legend.addTo(map);
    map.removeControl(currentInfo);
    currentInfo = results2001info;
    results2001info.addTo(map);
  }
  else if(eventLayer.name === '2008 Elections - Magnitude') {
    map.removeControl(currentLegend);
    currentLegend = results2008legend;
    results2008legend.addTo(map);
    map.removeControl(currentInfo);
    currentInfo = results2008info;
    results2008info.addTo(map);
  }*/
  if(eventLayer.name === '2008 Elections - Constituency') {
    map.removeControl(currentLegend);
    currentLegend = results2008conlegend;
    results2008conlegend.addTo(map);
    map.removeControl(currentInfo);
    currentInfo = results2008coninfo;
    results2008coninfo.addTo(map);
  }
  /*else if(eventLayer.name === '2008 Elections - Swing') {
    map.removeControl(currentLegend);
    currentLegend = swinglegend;
    swinglegend.addTo(map);
    map.removeControl(currentInfo);
    currentInfo = swinginfo;
    swinginfo.addTo(map);
  }*/
  else if(eventLayer.name === '2008 Elections - Turnout') {
    map.removeControl(currentLegend);
    currentLegend = turnout2008legend;
    turnout2008legend.addTo(map);
    map.removeControl(currentInfo);
    currentInfo = turnout2008info;
    turnout2008info.addTo(map);
  }
  else if(eventLayer.name === '2008 Elections - AL') {
    map.removeControl(currentLegend);
    currentLegend = awami2008legend;
    awami2008legend.addTo(map);
    map.removeControl(currentInfo);
    currentInfo = awami2008info;
    awami2008info.addTo(map);
  }
  else if(eventLayer.name === '2008 Elections - BNP') {
    map.removeControl(currentLegend);
    currentLegend = bnp2008legend;
    bnp2008legend.addTo(map);
    map.removeControl(currentInfo);
    currentInfo = bnp2008info;
    bnp2008info.addTo(map);
  }
  else if(eventLayer.name === '2008 Elections - JP') {
    map.removeControl(currentLegend);
    currentLegend = jatiya2008legend;
    jatiya2008legend.addTo(map);
    map.removeControl(currentInfo);
    currentInfo = jatiya2008info;
    jatiya2008info.addTo(map);
  }
  else if(eventLayer.name === '2008 Elections - Other') {
    map.removeControl(currentLegend);
    currentLegend = other2008legend;
    other2008legend.addTo(map);
    map.removeControl(currentInfo);
    currentInfo = other2008info;
    other2008info.addTo(map);
  }
  else if(eventLayer.name === '2008 Elections - Cancelled') {
    map.removeControl(currentLegend);
    currentLegend = cancelled2008legend;
    cancelled2008legend.addTo(map);
    map.removeControl(currentInfo);
    currentInfo = cancelled2008info;
    cancelled2008info.addTo(map);
  }
  /*else if(eventLayer.name === 'Battleground Constituencies') {
    map.removeControl(currentLegend);
    currentLegend = battlegroundlegend;
    battlegroundlegend.addTo(map);
    map.removeControl(currentInfo);
    currentInfo = battlegroundinfo;
    battlegroundinfo.addTo(map);
  }*/
});
</script>
{{super()}}
{% endblock %}
